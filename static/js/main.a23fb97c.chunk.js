(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{10:function(e,t,n){e.exports={page:"feed_page__2aeEN",title:"feed_title__19VYp",context:"feed_context__3ZWYU",orders:"feed_orders__2v7Ru",order:"feed_order__dopH_",order__info:"feed_order__info__3-IQF",order__id:"feed_order__id__1JVVo",order__data:"feed_order__data__3Uwlx",order__title:"feed_order__title__2FTmH",order__menu:"feed_order__menu__3scM9",images:"feed_images__2YZWs",image:"feed_image__zj8eA",total:"feed_total__1xqQd",statistics:"feed_statistics__2fnr9",statistics__now:"feed_statistics__now__3pVIi",inWork:"feed_inWork__3S0we",inWork__title:"feed_inWork__title__14mVm",inWork__numbers:"feed_inWork__numbers__27Ywg",inWork__number:"feed_inWork__number__11pyZ",statistics__orders:"feed_statistics__orders__2iN5x",statistics__orders__title:"feed_statistics__orders__title__1-FsK",statistics__orders__number:"feed_statistics__orders__number__2oTCK"}},103:function(e,t,n){e.exports={burger__item:"ingredientBurger_burger__item__1Gu9O"}},111:function(e,t,n){},13:function(e,t,n){e.exports={conteiner:"ingredient_conteiner__2ipsP",image:"ingredient_image__3D64M",title:"ingredient_title__1NJ2H",list:"ingredient_list__1NwiN",item:"ingredient_item__2m07o",item__text:"ingredient_item__text__3JFSM",item__number:"ingredient_item__number__13UeS"}},14:function(e,t,n){e.exports={conteiner:"ingredientDetails_conteiner__3ESRi",image:"ingredientDetails_image__13q2T",title:"ingredientDetails_title__byZY-",list:"ingredientDetails_list__15WjJ",item:"ingredientDetails_item__wK38K",item__text:"ingredientDetails_item__text__1e271",item__number:"ingredientDetails_item__number__3uKmJ"}},15:function(e,t,n){e.exports={page:"order_page__3Fp7-",order__number:"order_order__number__1iWKI",order__name:"order_order__name__1xgyE",order__status:"order_order__status__1i5Gh",info:"order_info__3tzLe",info__title:"order_info__title__31dOn",total:"order_total__2Sbhn",date:"order_date__1nY2P",sum:"order_sum__3vyfq",item:"order_item__3mObt",item__info:"order_item__info__3AJWN",item__img:"order_item__img__3ZpaQ",item__text:"order_item__text__1vFi8",item__sum:"order_item__sum__ukN6p",item__price:"order_item__price__4_OJM"}},16:function(e,t,n){e.exports={page:"orderPopup_page__3x9DO",order__number:"orderPopup_order__number__2sGxG",order__name:"orderPopup_order__name__2XcoL",order__status:"orderPopup_order__status__2_7In",info:"orderPopup_info__3ZgZI",info__title:"orderPopup_info__title__sbLyV",total:"orderPopup_total__1d8ta",date:"orderPopup_date__2iwqJ",sum:"orderPopup_sum__1v5nt",item:"orderPopup_item__1LHvk",item__info:"orderPopup_item__info__3oAOi",item__img:"orderPopup_item__img__jLmXN",item__text:"orderPopup_item__text__VG7ET",item__sum:"orderPopup_item__sum__1SxrV",item__price:"orderPopup_item__price__Zg6We"}},195:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(32),c=n.n(i),s=(n(111),n(9)),o=n(5),l=n(30),u=l.d,d=function(){return Object(l.c)()},_=n(27),m=n.n(_),p=n(7),j=n(6),b=n(0);function f(){var e=Object(o.f)();return Object(b.jsx)("header",{className:m.a.header,children:Object(b.jsxs)("nav",{className:m.a.navigation,children:[Object(b.jsxs)("div",{className:m.a.navigation__conteiner,children:[Object(b.jsxs)(p.c,{to:"/",className:function(e){var t=e.isActive;return[m.a.text,t?m.a.text_active:null].filter(Boolean).join(" ")},children:[Object(b.jsx)(j.BurgerIcon,{type:"/"===e.pathname?"primary":"secondary"})," \u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"]}),Object(b.jsxs)(p.c,{to:"/feed",className:function(e){var t=e.isActive;return[m.a.text,t?m.a.text_active:null].filter(Boolean).join(" ")},children:[Object(b.jsx)(j.ListIcon,{type:"/orders"===e.pathname?"primary":"secondary"})," \u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"]})]}),Object(b.jsx)(p.c,{to:"/",children:Object(b.jsx)(j.Logo,{})}),Object(b.jsxs)(p.c,{id:"toProfile",to:"/profile",className:function(e){var t=e.isActive;return[m.a.text,t?m.a.text_active:null].filter(Boolean).join(" ")},children:[Object(b.jsx)(j.ProfileIcon,{type:"/profile"===e.pathname?"primary":"secondary"})," \u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"]})]})})}var O=function(e){var t=e.children,n=Object(o.f)();return localStorage.getItem("authorization")?t:Object(b.jsx)(o.a,{replace:!0,to:"/login",state:{from:n}})},h=n(11),x=n.n(h),g=n(26),v="https://norma.nomoreparties.space/api";function y(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function N(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var i=e+"="+(t=encodeURIComponent(t));for(var c in n){i+="; "+c;var s=n[c];!0!==s&&(i+="="+s)}document.cookie=i}var k=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},E=function(e){return"".concat(e.slice(0,10),", ").concat(e.slice(11,16)," i-GMT+3")},T=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/auth/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,name:t.name})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/password-reset"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t.email})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/password-reset/reset"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({password:t.password,token:t.value})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/auth/logout"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/ingredients"),{method:"GET"}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:y("accessToken")},body:JSON.stringify({ingredients:t})}).then(k).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D="GET_ITEMS_SUCCESS",A="GET_ITEMS_FAILED",L="ADD_ITEM",R="DELETE_ITEM",B="CHANGE_BUN",M="CHANCE_ITEMS",W="INCREASE_ITEM_COUNT",G="DECREASE_ITEM_COUNT",z="OPEN_POPUP",J="CLOSE_POPUP",U="GET_ORDER_SUCCESS",q="GET_ORDER_FAILED",H=function(e,t){return{type:W,payload:{item:e,qty:t}}},V=function(){return function(e){P().then((function(t){return e((n=t.data,{type:D,items:n}));var n})).catch((function(){return e({type:A})}))}},X=function(e){return function(t){F(e).then((function(e){var n;e.success?t((n=e.order,{type:U,order:n})):t({type:q})})).catch((function(){return t({type:q})}))}},Z=n(52),K=n.n(Z),Y=n(200),Q=n(105),$=n(21),ee=n.n($),te=n(33),ne=n.n(te),re=n(201),ae=function(e){var t=e.data,n=u((function(e){return{bun:e.burgerItems.bun}})),r=n.bun,i=d(),c=t._id,o=t.name,l=t.image,_=t.price,m=t.type,p=t.qty,f=a.a.useMemo((function(){return"bun"===m?c===(null!==r&&r._id)?Object(b.jsx)("p",{className:ne.a.item__number,children:"2"},c):Object(b.jsx)("p",{className:ne.a.item__number,children:"0"},c):p&&0!==p?Object(b.jsx)("p",{className:ne.a.item__number,children:p},c):null}),[m,null!==r&&r._id,p,null!==c&&c]),O=Object(re.a)({type:"ingredient",item:{_id:c,name:o,image:l,price:_,type:m}}),h=Object(s.a)(O,2)[1];return Object(b.jsxs)("li",{ref:h,className:ne.a.item,onClick:function(){i({type:z,ingredient:t}),localStorage.setItem("popup","true")},children:[f,Object(b.jsx)("img",{className:ne.a.item__image,alt:t.name,src:t.image}),Object(b.jsxs)("p",{className:ne.a.item__price,children:[t.price," ",Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{className:ne.a.item__text,children:t.name})]})},ie=function(){var e=Object(o.f)(),t=u((function(e){return{items:e.items.items}})),n=t.items,i=a.a.useState("\u0411\u0443\u043b\u043a\u0438"),c=Object(s.a)(i,2),l=c[0],d=c[1],_=Object(r.useRef)(null),m=Object(r.useRef)(null),f=Object(r.useRef)(null),O=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=document.getElementById("menu"),t=function(){var e=null!==_.current&&_.current.getBoundingClientRect().top,t=null!==m.current&&m.current.getBoundingClientRect().top,n=null!==f.current&&f.current.getBoundingClientRect().top;250<e&&e<350?d("\u0411\u0443\u043b\u043a\u0438"):250<t&&t<350?d("\u0421\u043e\u0443\u0441\u044b"):250<n&&n<350&&d("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")};return e&&e.addEventListener("scroll",t),function(){e&&e.removeEventListener("scroll",t)}}));var h=function(t){return null!==n&&n.map((function(n){return n.type===t?Object(b.jsx)(p.b,{className:ee.a.link,to:"/ingredients/".concat(n._id),state:{backgroundLocation:e},children:Object(b.jsx)(ae,{data:n},n._id)},n._id):null}))};return Object(b.jsxs)("section",{children:[Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(j.Tab,{value:"\u0411\u0443\u043b\u043a\u0438",active:"\u0411\u0443\u043b\u043a\u0438"===l,onClick:function(){return d("\u0411\u0443\u043b\u043a\u0438")},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(j.Tab,{value:"\u0421\u043e\u0443\u0441\u044b",active:"\u0421\u043e\u0443\u0441\u044b"===l,onClick:function(){return d("\u0421\u043e\u0443\u0441\u044b")},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)(j.Tab,{value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===l,onClick:function(){return d("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(b.jsxs)("menu",{className:ee.a.menu,ref:O,id:"menu",children:[Object(b.jsxs)("div",{className:ee.a.menu__item,ref:_,children:[Object(b.jsx)("h3",{className:ee.a.menu__title,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)("ul",{className:ee.a.menu__list,children:h("bun")})]}),Object(b.jsxs)("div",{className:ee.a.menu__item,ref:m,children:[Object(b.jsx)("h3",{className:ee.a.menu__title,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)("ul",{className:ee.a.menu__list,children:h("sauce")})]}),Object(b.jsxs)("div",{className:ee.a.menu__item,ref:f,children:[Object(b.jsx)("h3",{className:ee.a.menu__title,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)("ul",{className:ee.a.menu__list,children:h("main")})]})]})]})},ce=n(2),se=n(45),oe=n.n(se),le=n(202),ue=n(103),de=n.n(ue),_e=n(44),me=function(e){var t=e.item,n=e.index,r=d(),a=function(e,n){r({type:R,id:e,_id:n}),r(function(e,t){return{type:G,payload:{item:e,qty:t}}}(t,1))};return Object(b.jsx)(_e.b,{draggableId:t.id,index:n,children:function(e,n){return Object(b.jsxs)("li",Object(ce.a)(Object(ce.a)(Object(ce.a)({className:de.a.burger__item,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(b.jsx)(j.DragIcon,{type:"primary"}),Object(b.jsx)(j.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){a(t.id,t._id)}})]}))}},t.id)},pe=function(e){var t=e.openPopup,n=u((function(e){return{burgerItems:e.burgerItems.burgerItems,bun:e.burgerItems.bun}})),r=n.burgerItems,a=n.bun,i=d(),c=Object(o.g)(),l=localStorage.getItem("authorization"),_=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),i=Object(s.a)(a,1)[0];return r.splice(n,0,i),r},m=Object(le.a)((function(){return{accept:"ingredient",drop:function(e){if("bun"!==e.type){i({type:L,item:{image:e.image,name:e.name,price:e.price,_id:e._id,id:"".concat(Math.floor(1e4*Math.random()))}}),i(H(e,1))}else{i({type:B,bun:{image:e.image,name:e.name,price:e.price,_id:e._id,id:"".concat(Math.floor(1e4*Math.random()))}}),i(H(e,2))}}}})),p=Object(s.a)(m,2)[1];return Object(b.jsx)("section",{children:Object(b.jsxs)(_e.a,{onDragEnd:function(e){if(e.destination){var t=_(r,e.source.index,e.destination.index);i({type:M,items:t})}},children:[Object(b.jsxs)("menu",{ref:p,className:oe.a.burger__menu,children:[null!==a&&Object(b.jsx)(j.ConstructorElement,{type:"top",isLocked:!0,text:a.name?"".concat(a.name," (\u0432\u0435\u0440\u0445)"):"",price:a.price?a.price:0,thumbnail:a.image}),Object(b.jsx)(_e.c,{droppableId:"droppable",children:function(e,t){return Object(b.jsxs)("ul",Object(ce.a)(Object(ce.a)({id:"burger",className:oe.a.burger__list},e.droppableProps),{},{ref:e.innerRef,children:[r.map((function(e,t){return"bun"!==e.type?Object(b.jsx)(me,{item:e,index:t},t):null}))," ",e.placeholder]}))}}),null!==a&&Object(b.jsx)(j.ConstructorElement,{type:"bottom",isLocked:!0,text:a.name?"".concat(a.name," (\u043d\u0438\u0437)"):"",price:a.price?a.price:0,thumbnail:a.image})]}),Object(b.jsxs)("div",{className:oe.a.burger__price,children:[Object(b.jsxs)("p",{className:oe.a.sum,children:[function(){var e=0,t=null!==a&&a.price?2*a.price:0;return r.forEach((function(t){if("bun"!==t.type)return e+=t.price})),e+t}(),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)(j.Button,{onClick:function(){var e=[];if(null!==a&&e.push(a._id),r.forEach((function(t){if("bun"!==t.type)return e.push(t._id)})),!l)return c("/login");(null===a||void 0===a?void 0:a._id)?i(X(e)):i(X(e=[])),t()},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})},je=n(53),be=n.n(je),fe=n(76),Oe=n.n(fe),he=document.getElementById("react-modals"),xe=function(e){var t=e.isOpen,n=e.children,r=e.closePopup;return c.a.createPortal(Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:t?Oe.a.popup__overlay:Oe.a.popup__close,onClick:r,children:n})}),he)},ge=function(e){var t=e.isOpen,n=e.title,r=e.closePopup,i=e.children,c=function(){r()};return a.a.useEffect((function(){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),Object(b.jsx)(xe,{isOpen:t,closePopup:c,children:Object(b.jsxs)("div",{className:be.a.popup,onClick:function(e){return e.stopPropagation()},children:[Object(b.jsxs)("div",{className:be.a.popup__header,children:[Object(b.jsx)("h2",{className:be.a.title,children:n}),Object(b.jsx)("div",{id:"closeIcon",onClick:c,children:Object(b.jsx)(j.CloseIcon,{type:"primary"})})]}),i]})})},ve=n(22),ye=n.n(ve),Ne=n.p+"static/media/graphics.54f842c2.png";function ke(){var e=u((function(e){return{order:e.order.order,orderFailed:e.order.orderFailed}})),t=e.order;return e.orderFailed?Object(b.jsx)("div",{className:ye.a.popup__conteiner_err,children:Object(b.jsx)("p",{className:"".concat(ye.a.order," ").concat(ye.a.order_err),children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0431\u0443\u043b\u043a\u0443 \u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})}):Object(b.jsxs)("div",{className:ye.a.popup__conteiner,children:[Object(b.jsx)("p",{className:ye.a.number,children:null===t||void 0===t?void 0:t.number}),Object(b.jsx)("p",{className:ye.a.order,children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{alt:"Icon",src:Ne,className:ye.a.image}),Object(b.jsxs)("div",{className:ye.a.conteiner,children:[Object(b.jsx)("p",{className:ye.a.text,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"".concat(ye.a.text," ").concat(ye.a.text_type_last),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})}function Ee(){var e=a.a.useState(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],i=d();return Object(b.jsxs)("div",{className:K.a.App,children:[Object(b.jsx)(Y.a,{backend:Q.a,children:Object(b.jsxs)("main",{className:K.a.main,children:[Object(b.jsx)("h2",{className:K.a.title,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsx)(ie,{}),Object(b.jsx)(pe,{openPopup:function(){r(!0)}})]})}),n&&Object(b.jsx)(ge,{isOpen:n,title:"",closePopup:function(){r(!1),i({type:J,ingredient:{},order:{}})},children:Object(b.jsx)(ke,{})})]})}var Te=n(54),Ie=n.n(Te);function Se(){return Object(b.jsxs)("div",{className:Ie.a.page,children:[Object(b.jsx)("h1",{className:Ie.a.title,children:"404"}),Object(b.jsx)(p.c,{to:"/",className:Ie.a.link,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})}var we=n(39),Ce=n(28),Pe=n.n(Ce),Fe=function(e){var t=e.title,n=e.inputs,r=e.button,i=e.enty,c=e.password,l=e.entry,u=e.toResetPassword,_=d(),m=Object(o.g)(),f=a.a.useState({email:"",password:"",name:"",value:""}),O=Object(s.a)(f,2),h=O[0],x=O[1],g=a.a.useCallback((function(e){e.preventDefault(),_(l(h)),Boolean(u)?void 0!==u&&u():m("/")}),[h,_,m,l,u]);return Object(b.jsx)("section",{className:Pe.a.section,children:Object(b.jsxs)("form",{className:Pe.a.conteiner,onSubmit:g,children:[Object(b.jsx)("h2",{className:Pe.a.title,children:t}),Object(b.jsx)("ul",{className:Pe.a.inputs,children:n.map((function(e,t){return Object(b.jsx)(j.Input,{type:e.type,placeholder:e.placeholder,name:e.name,error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",icon:e.icon,value:"email"===e.type?h.email:"password"===e.type?h.password:"name"===e.name?h.name:h.value,onChange:function(e){return function(e){x(Object(ce.a)(Object(ce.a)({},h),{},Object(we.a)({},e.target.name,e.target.value)))}(e)}},t)}))}),Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:r}),Object(b.jsxs)("div",{className:Pe.a.textBlock,children:[Object(b.jsxs)("p",{className:Pe.a.text,children:[i.title," ",Object(b.jsx)(p.b,{to:"".concat(i.link),className:Pe.a.link,children:i.text})]}),Boolean(c)&&Object(b.jsxs)("p",{className:Pe.a.text,children:[void 0!==c&&c.title," ",Object(b.jsx)(p.b,{to:"".concat(void 0!==c&&c.link),className:Pe.a.link,children:void 0!==c&&c.text})]})]})]})})},De="REGISTRATION",Ae="AUTHORIZATION",Le="EXIT",Re="GET_USER",Be="UPDATE_USER",Me="POST_EMAIL",We="RESET_PASSWORD",Ge=function(e){return function(t){T(e).then((function(e){var n,r,a,i;e.success?(localStorage.setItem("token",e.refreshToken?e.refreshToken:""),localStorage.setItem("authorization","true"),N("accessToken",e.accessToken?e.accessToken:""),t((n=e.user.email,r=e.user.name,a=e.accessToken?e.accessToken:"",i=e.refreshToken?e.refreshToken:"",{type:De,email:n,name:r,accessToken:a,refreshToken:i}))):t({type:"GET_FAILED"})})).catch((function(){return t({type:"GET_FAILED"})}))}},ze=function(e){return function(t){I(e).then((function(e){var n,r,a,i;e.success?(localStorage.setItem("token",e.refreshToken?e.refreshToken:""),localStorage.setItem("authorization","true"),N("accessToken",e.accessToken?e.accessToken:""),t((n=e.user.email,r=e.user.name,a=e.accessToken?e.accessToken:"",i=e.refreshToken?e.refreshToken:"",{type:Ae,email:n,name:r,accessToken:a,refreshToken:i}))):t({type:"GET_FAILED"})})).catch((function(){return t({type:"GET_FAILED"})}))}},Je=function(e){return function(t){S(e).then((function(e){e.success&&t({type:Me})})).catch((function(){return t({type:"GET_FAILED"})}))}},Ue=function(e){return function(t){w(e).then((function(e){e.success&&t({type:We})})).catch((function(){return t({type:"GET_FAILED"})}))}},qe=function(){return function(e){C().then((function(t){t.success?(localStorage.removeItem("token"),localStorage.setItem("authorization","false"),localStorage.removeItem("authorization"),N("accessToken","",{expires:-1}),e({type:Le})):e({type:"GET_FAILED"})})).catch((function(){return e({type:"GET_FAILED"})}))}},He=function(){return function(e){Xe("".concat(v,"/auth/user"),{method:"GET",headers:{"content-type":"application/json",authorization:y("accessToken")}}).then((function(t){var n,r;t.success?e((n=t.user.email,r=t.user.name,{type:Re,email:n,name:r})):(localStorage.setItem("authorization","false"),e({type:"GET_FAILED"}))})).catch((function(){return e({type:"GET_FAILED"})}))}},Ve=function(e){return function(t){Xe("".concat(v,"/auth/user"),{method:"PATCH",headers:{"content-type":"application/json",authorization:y("accessToken")},body:JSON.stringify({email:e.email,name:e.name,password:e.password})}).then((function(e){var n,r;e.success?t((n=e.user.email,r=e.user.name,{type:Be,email:n,name:r})):t({type:"GET_FAILED"})})).catch((function(){return t({type:"GET_FAILED"})}))}},Xe=function(){var e=Object(g.a)(x.a.mark((function e(t,n){var r,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}));case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=28;break}return console.log("progress..."),e.next=13,fetch("".concat(v,"/auth/token"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then(k);case 13:return a=e.sent,localStorage.setItem("token",a.refreshToken),localStorage.setItem("authorization","true"),console.log(a.accessToken),N("accessToken",a.accessToken),console.log(y("accessToken")),e.next=21,y("accessToken");case 21:return n.headers.authorization=e.sent,e.next=24,fetch(t,n).then((function(e){return e.json()}));case 24:return i=e.sent,e.abrupt("return",i);case 28:throw e.t0;case 29:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();function Ze(){var e=Object(o.g)(),t=localStorage.getItem("authorization");return a.a.useEffect((function(){if(t)return e(-1)}),[t,e]),Object(b.jsx)(Fe,{title:"\u0412\u0445\u043e\u0434",inputs:[{type:"email",placeholder:"E-mail",name:"email"},{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",name:"password"}],enty:{link:"/register",text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",title:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"},password:{link:"/forgot-password",text:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",title:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"},entry:ze,button:"\u0412\u043e\u0439\u0442\u0438"})}function Ke(){var e=Object(o.g)(),t=localStorage.getItem("authorization");return a.a.useEffect((function(){if(t)return e(-1)}),[t,e]),Object(b.jsx)("div",{children:Object(b.jsx)(Fe,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",inputs:[{type:"text",placeholder:"\u0418\u043c\u044f",name:"name"},{type:"email",placeholder:"E-mail",name:"email"},{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",name:"password"}],enty:{link:"/login",text:"\u0412\u043e\u0439\u0442\u0438",title:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"},entry:Ge,button:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})}function Ye(){var e=u((function(e){return{toForgotPassword:e.auth.toForgotPassword}})),t=Object(o.g)(),n=localStorage.getItem("authorization");return a.a.useEffect((function(){if(n)return t(-1)}),[n,t]),Object(b.jsx)("div",{children:Object(b.jsx)(Fe,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",inputs:[{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email"}],enty:{link:"/login",text:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"},entry:Je,toResetPassword:function(){if(e)return t("/reset-password")},button:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})}function Qe(){var e=Object(o.g)(),t=localStorage.getItem("authorization");return a.a.useEffect((function(){if(t)return e(-1)}),[t,e]),Object(b.jsx)("div",{children:Object(b.jsx)(Fe,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",inputs:[{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",name:"password"},{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"value"}],enty:{link:"/login",text:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"},entry:Ue,button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",toResetPassword:function(){return e("/login")}})})}var $e=n(78),et=n.n($e);function tt(){var e=d(),t=u((function(e){return{name:e.auth.name,email:e.auth.email}})),n=t.name,r=t.email,i=a.a.useState({name:n,email:r,password:""}),c=Object(s.a)(i,2),o=c[0],l=c[1],_=a.a.useState(!1),m=Object(s.a)(_,2),p=m[0],f=m[1];a.a.useEffect((function(){l({password:"",email:r,name:n}),f(!1)}),[n,r]);var O=function(e){l(Object(ce.a)(Object(ce.a)({},o),{},Object(we.a)({},e.target.name,e.target.value))),f(!0)},h=a.a.useCallback((function(t){t.preventDefault(),f(!1),e(Ve(o))}),[o,e]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("form",{className:et.a.form,children:[Object(b.jsx)(j.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:o.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",icon:"EditIcon",onChange:function(e){return O(e)}}),Object(b.jsx)(j.Input,{type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:o.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",icon:"EditIcon",onChange:function(e){return O(e)}}),Object(b.jsx)(j.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.password,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",icon:"EditIcon",onChange:function(e){return O(e)}})]}),p&&Object(b.jsxs)("div",{className:et.a.buttons,children:[Object(b.jsx)(j.Button,{type:"primary",size:"small",onClick:h,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(j.Button,{type:"secondary",size:"medium",onClick:function(){l({password:"",email:r,name:n}),f(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}var nt=n(25),rt=n.n(nt),at=n(31),it=n.n(at),ct=n.p+"static/media/ingredients.e82b11a4.png";function st(e){return Object(b.jsxs)("li",{className:it.a.order,children:[Object(b.jsxs)("div",{className:it.a.order__info,children:[Object(b.jsx)("p",{className:it.a.order__id,children:e.number}),Object(b.jsx)("p",{className:it.a.order__data,children:E(e.createdAt)})]}),Object(b.jsx)("h3",{className:it.a.order__title,children:e.name}),Object(b.jsxs)("div",{className:it.a.order__menu,children:[Object(b.jsx)("img",{alt:"ff",src:ct,className:it.a.images}),Object(b.jsxs)("p",{className:it.a.total,children:["480 ",Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})}var ot=n(55),lt=n.n(ot);function ut(e){var t=Object(o.f)(),n=u((function(e){return{orders:e.orders.orders}})),r=n.orders,a=function(){return e.openPopup(!0)};return Object(b.jsx)("ul",{className:lt.a.orders,children:r.map((function(e){return"/feed"===t.pathname?Object(b.jsx)(p.b,{className:lt.a.link,to:"/feed/".concat(e._id),state:{backgroundForFeed:t},onClick:a,children:Object(b.jsx)(st,{number:e.number,createdAt:e.createdAt,name:e.name})},e._id):Object(b.jsx)(p.b,{className:lt.a.link,to:"/profile/orders/".concat(e._id),state:{backgroundForProfile:t},onClick:a,children:Object(b.jsx)(st,{number:e.number,createdAt:e.createdAt,name:e.name})},e._id)}))})}var dt="WS_CONNECTION_START",_t="WS_CONNECTION_SUCCESS",mt="WS_CONNECTION_ERROR",pt="WS_CONNECTION_CLOSED",jt="WS_GET_ORDERS";function bt(e){var t=d(),n=Object(o.g)(),r=Object(o.f)(),i=y("accessToken");a.a.useEffect((function(){t(He())}),[t]);var c=a.a.useCallback((function(e){e.preventDefault(),n("/login"),t(qe())}),[t,n]);return a.a.useEffect((function(){return t({type:dt,payload:"wss://norma.nomoreparties.space/orders/all?token=".concat(null===i||void 0===i?void 0:i.replace("Bearer ",""))}),function(){t({type:pt})}}),[i,t]),Object(b.jsxs)("section",{className:"".concat(rt.a.section," ").concat("/profile/orders"===r.pathname&&rt.a.section_path_order),children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("nav",{className:rt.a.menu,children:[Object(b.jsx)(p.c,{end:!0,to:"/profile",className:function(e){var t=e.isActive;return[rt.a.name,t?rt.a.name_active:null].filter(Boolean).join(" ")},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(b.jsx)(p.c,{to:"/profile/orders",className:function(e){var t=e.isActive;return[rt.a.name,t?rt.a.name_active:null].filter(Boolean).join(" ")},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)("button",{onClick:c,className:rt.a.name,children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(b.jsx)("p",{className:rt.a.text,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(b.jsxs)("div",{className:rt.a.orders,children:["/profile"===r.pathname&&Object(b.jsx)(tt,{}),"/profile/orders"===r.pathname&&Object(b.jsx)(ut,{openPopup:e.openPopup})]})]})}function ft(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/",element:Object(b.jsx)(bt,{})})}),Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/orders",element:Object(b.jsx)(bt,{openPopup:e.openPopup})})})]})}var Ot=n(10),ht=n.n(Ot);function xt(e){var t=d(),n=u((function(e){return e.orders})),r=n.total,i=n.totalToday,c=n.orders;a.a.useEffect((function(){return t({type:dt,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){t({type:pt})}}),[t]);var s=a.a.useCallback((function(){return c.filter((function(e){return"done"===e.status})).slice(0,5)}),[c]),o=a.a.useCallback((function(){return c.filter((function(e){return"pending"===e.status})).slice(0,5)}),[c]);return Object(b.jsxs)("section",{className:ht.a.page,children:[Object(b.jsx)("h2",{className:ht.a.title,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("div",{className:ht.a.context,children:[Object(b.jsx)(ut,{openPopup:e.openPopup}),Object(b.jsxs)("div",{className:ht.a.statistics,children:[Object(b.jsxs)("div",{className:ht.a.statistics__now,children:[Object(b.jsxs)("div",{className:ht.a.inWork,children:[Object(b.jsx)("h3",{className:ht.a.inWork__title,children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("div",{className:ht.a.inWork__numbers,children:s().map((function(e,t){return Object(b.jsx)("p",{className:ht.a.inWork__number,children:e.number},t)}))})]}),Object(b.jsxs)("div",{className:ht.a.inWork,children:[Object(b.jsx)("h3",{className:ht.a.inWork__title,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("div",{className:ht.a.inWork__numbers,children:o().map((function(e,t){return Object(b.jsx)("p",{className:ht.a.inWork__number,children:e.number},t)}))})]})]}),Object(b.jsxs)("div",{className:ht.a.statistics__orders,children:[Object(b.jsx)("p",{className:ht.a.statistics__orders__title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:ht.a.statistics__orders__number,children:r})]}),Object(b.jsxs)("div",{className:ht.a.statistics__orders,children:[Object(b.jsx)("p",{className:ht.a.statistics__orders__title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:ht.a.statistics__orders__number,children:i})]})]})]})]})}var gt=n(15),vt=n.n(gt);function yt(){var e=Object(o.f)(),t=d(),n=Object(o.h)().id,r=u((function(e){return{items:e.items.items,orders:e.orders.orders}})),i=r.items,c=r.orders,s=a.a.useMemo((function(){return c.find((function(e){return e._id===n}))}),[n,c]);a.a.useEffect((function(){return e.state||t({type:dt,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e.state||t({type:pt})}}),[e.state,t]);var l=function(e){var t=[];return null===s||void 0===s||s.ingredients.map((function(n){e.forEach((function(e){e._id===n&&t.push(e)}))})),t}(i),_=a.a.useCallback((function(){var e=0;return l.forEach((function(t){return e+=t.price})),e}),[l]);return Object(b.jsx)(b.Fragment,{children:Boolean(s)&&Object(b.jsxs)("div",{className:vt.a.page,children:[Object(b.jsx)("p",{className:vt.a.order__number,children:null===s||void 0===s?void 0:s.number}),Object(b.jsx)("h2",{className:vt.a.order__name,children:null===s||void 0===s?void 0:s.name}),Object(b.jsx)("p",{className:vt.a.order__status,children:null===s||void 0===s?void 0:s.status}),Object(b.jsxs)("div",{className:vt.a.info,children:[Object(b.jsx)("p",{className:vt.a.info__title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),l.map((function(e){return Object(b.jsxs)("div",{className:vt.a.item,children:[Object(b.jsxs)("div",{className:vt.a.item__info,children:[Object(b.jsx)("img",{className:vt.a.item__img,src:e.image_mobile,alt:"ingredientLogo"}),Object(b.jsx)("span",{className:vt.a.item__text,children:e.name})]}),Object(b.jsxs)("div",{className:vt.a.item__sum,children:[Object(b.jsx)("p",{className:vt.a.price,children:e.price}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]},e._id+Math.random())}))]}),Object(b.jsxs)("div",{className:vt.a.total,children:[Object(b.jsx)("p",{className:vt.a.date,children:E(null===s||void 0===s?void 0:s.createdAt)}),Object(b.jsxs)("p",{className:vt.a.sum,children:[_()," ",Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})})}var Nt=n(13),kt=n.n(Nt);function Et(){var e=Object(o.h)().id,t=u((function(e){return{items:e.items.items}})),n=t.items,r=a.a.useMemo((function(){return n&&n.find((function(t){return t._id===e}))}),[n,e]);return Object(b.jsx)(b.Fragment,{children:Boolean(r)&&Object(b.jsxs)("div",{className:kt.a.conteiner,children:[Object(b.jsx)("img",{className:kt.a.image,alt:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.image}),Object(b.jsx)("h3",{className:kt.a.title,children:null===r||void 0===r?void 0:r.name}),Object(b.jsxs)("ul",{className:kt.a.list,children:[Object(b.jsxs)("li",{className:kt.a.item,children:[Object(b.jsx)("p",{className:kt.a.item__text,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("p",{className:kt.a.item__number,children:null===r||void 0===r?void 0:r.calories})]}),Object(b.jsxs)("li",{className:kt.a.item,children:[Object(b.jsx)("p",{className:kt.a.item__text,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("p",{className:kt.a.item__number,children:null===r||void 0===r?void 0:r.proteins})]}),Object(b.jsxs)("li",{className:kt.a.item,children:[Object(b.jsx)("p",{className:kt.a.item__text,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("p",{className:kt.a.item__number,children:null===r||void 0===r?void 0:r.fat})]}),Object(b.jsxs)("li",{className:kt.a.item,children:[Object(b.jsx)("p",{className:kt.a.item__text,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("p",{className:kt.a.item__number,children:null===r||void 0===r?void 0:r.carbohydrates})]})]})]})})}var Tt=n(14),It=n.n(Tt);function St(){var e=Object(o.h)().id,t=u((function(e){return{items:e.items.items}})),n=t.items,r=a.a.useMemo((function(){return n&&n.find((function(t){return t._id===e}))}),[n,e]);return Object(b.jsx)(b.Fragment,{children:Boolean(r)&&Object(b.jsxs)("div",{className:It.a.conteiner,children:[Object(b.jsx)("img",{className:It.a.image,alt:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.image}),Object(b.jsx)("h3",{className:It.a.title,children:null===r||void 0===r?void 0:r.name}),Object(b.jsxs)("ul",{className:It.a.list,children:[Object(b.jsxs)("li",{className:It.a.item,children:[Object(b.jsx)("p",{className:It.a.item__text,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("p",{className:It.a.item__number,children:null===r||void 0===r?void 0:r.calories})]}),Object(b.jsxs)("li",{className:It.a.item,children:[Object(b.jsx)("p",{className:It.a.item__text,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("p",{className:It.a.item__number,children:null===r||void 0===r?void 0:r.proteins})]}),Object(b.jsxs)("li",{className:It.a.item,children:[Object(b.jsx)("p",{className:It.a.item__text,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("p",{className:It.a.item__number,children:null===r||void 0===r?void 0:r.fat})]}),Object(b.jsxs)("li",{className:It.a.item,children:[Object(b.jsx)("p",{className:It.a.item__text,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("p",{className:It.a.item__number,children:null===r||void 0===r?void 0:r.carbohydrates})]})]})]})})}var wt=n(16),Ct=n.n(wt);function Pt(){var e=d(),t=Object(o.h)().id,n=u((function(e){return{items:e.items.items,orders:e.orders.orders}})),r=n.items,i=n.orders,c=a.a.useMemo((function(){return i.find((function(e){return e._id===t}))}),[t,i]);a.a.useEffect((function(){return e({type:dt,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e({type:pt})}}),[e]);var s=function(e){var t=[];return null===c||void 0===c||c.ingredients.map((function(n){e.forEach((function(e){e._id===n&&t.push(e)}))})),t}(r),l=a.a.useCallback((function(){var e=0;return s.forEach((function(t){return e+=t.price})),e}),[s]);return Object(b.jsx)(b.Fragment,{children:Boolean(c)&&Object(b.jsxs)("div",{className:Ct.a.page,children:[Object(b.jsx)("p",{className:Ct.a.order__number,children:null===c||void 0===c?void 0:c.number}),Object(b.jsx)("h2",{className:Ct.a.order__name,children:null===c||void 0===c?void 0:c.name}),Object(b.jsx)("p",{className:Ct.a.order__status,children:null===c||void 0===c?void 0:c.status}),Object(b.jsxs)("div",{className:Ct.a.info,children:[Object(b.jsx)("p",{className:Ct.a.info__title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),s.map((function(e){return Object(b.jsxs)("div",{className:Ct.a.item,children:[Object(b.jsxs)("div",{className:Ct.a.item__info,children:[Object(b.jsx)("img",{className:Ct.a.item__img,src:e.image_mobile,alt:"ingredientLogo"}),Object(b.jsx)("span",{className:Ct.a.item__text,children:e.name})]}),Object(b.jsxs)("div",{className:Ct.a.item__sum,children:[Object(b.jsx)("p",{className:Ct.a.price,children:e.price}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]},e._id+Math.random())}))]}),Object(b.jsxs)("div",{className:Ct.a.total,children:[Object(b.jsx)("p",{className:Ct.a.date,children:E(null===c||void 0===c?void 0:c.createdAt)}),Object(b.jsxs)("p",{className:Ct.a.sum,children:[l()," ",Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})})}function Ft(){var e=d(),t=Object(o.f)(),n=Object(o.g)(),i=Object(r.useState)(!1),c=Object(s.a)(i,2),l=c[0],_=c[1],m=Object(r.useState)(!1),p=Object(s.a)(m,2),j=p[0],h=p[1],x=localStorage.getItem("popup"),g=t.state,v=u((function(e){return{ingridientPopup:e.ingredient.ingridientPopup,items:e.items}})),y=v.ingridientPopup,N=x||Boolean(y);a.a.useEffect((function(){e(V())}),[e]);var k=function(){localStorage.setItem("popup","false"),_(!1),h(!1),g.backgroundLocation&&n("/"),g.backgroundForFeed&&n(-1),g.backgroundForProfile&&n(-1),e({type:J,ingredient:{},order:{}})};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsxs)(o.d,{location:(null===g||void 0===g?void 0:g.backgroundLocation)||t,children:[Object(b.jsx)(o.b,{path:"/",element:Object(b.jsx)(Ee,{})}),Object(b.jsx)(o.b,{path:"/ingredients/:id",element:Object(b.jsx)(Et,{})}),Object(b.jsx)(o.b,{path:"/profile/*",element:Object(b.jsx)(O,{children:Object(b.jsx)(ft,{openPopup:h})})}),Object(b.jsx)(o.b,{path:"/profile/orders/:id",element:Object(b.jsx)(yt,{})}),Object(b.jsx)(o.b,{path:"/login",element:Object(b.jsx)(Ze,{})}),Object(b.jsx)(o.b,{path:"/register",element:Object(b.jsx)(Ke,{})}),Object(b.jsx)(o.b,{path:"/feed",element:Object(b.jsx)(xt,{openPopup:_})}),Object(b.jsx)(o.b,{path:"/feed/:id",element:Object(b.jsx)(yt,{})}),Object(b.jsx)(o.b,{path:"/forgot-password",element:Object(b.jsx)(Ye,{})}),Object(b.jsx)(o.b,{path:"/reset-password",element:Object(b.jsx)(Qe,{})}),Object(b.jsx)(o.b,{path:"*",element:Object(b.jsx)(Se,{})})]}),(null===g||void 0===g?void 0:g.backgroundLocation)&&Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/ingredients/:id",element:Object(b.jsx)(ge,{isOpen:Boolean(N),title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closePopup:k,children:Object(b.jsx)(St,{})})})}),(null===g||void 0===g?void 0:g.backgroundForFeed)&&Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/feed/:id",element:Object(b.jsx)(ge,{isOpen:l,closePopup:k,children:Object(b.jsx)(Pt,{})})})}),(null===g||void 0===g?void 0:g.backgroundForProfile)&&Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/profile/orders/:id",element:Object(b.jsx)(ge,{isOpen:j,closePopup:k,children:Object(b.jsx)(Pt,{})})})})]})}var Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},At=n(17),Lt=n(79),Rt={items:[],itemsFailed:!1,burgerItems:[],burgerItemsFailed:!1,bun:null,quantity:[],quantityBun:{},ingredient:{},ingridientPopup:!1,order:{number:"\u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"},orderFailed:!1},Bt={email:"",name:"",accessToken:"",refreshToken:"",toForgotPassword:!1},Mt={wsConnected:!1,orders:[],total:"",totalToday:""},Wt=Object(At.c)({burgerItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(ce.a)(Object(ce.a)({},e),{},{burgerItems:[].concat(Object(Lt.a)(e.burgerItems),[t.item])});case R:return Object(ce.a)(Object(ce.a)({},e),{},{burgerItems:Object(Lt.a)(e.burgerItems).filter((function(e){return e.id!==t.id}))});case B:return Object(ce.a)(Object(ce.a)({},e),{},{bun:t.bun});case M:return Object(ce.a)(Object(ce.a)({},e),{},{burgerItems:t.items});default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(ce.a)(Object(ce.a)({},e),{},{items:t.items,itemsFailed:!1});case A:return Object(ce.a)(Object(ce.a)({},e),{},{itemsFailed:!0});case W:return Object(ce.a)(Object(ce.a)({},e),{},{items:e.items.map((function(e){return e._id===t.payload.item._id?Object(ce.a)(Object(ce.a)({},e),{},{qty:(e.qty?e.qty:0)+t.payload.qty}):e}))});case G:return Object(ce.a)(Object(ce.a)({},e),{},{items:e.items.map((function(e){return e._id===t.payload.item._id?Object(ce.a)(Object(ce.a)({},e),{},{qty:(e.qty?e.qty:0)-t.payload.qty}):e}))});default:return e}},ingredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(ce.a)(Object(ce.a)({},e),{},{ingredient:t.ingredient,ingridientPopup:!0});case J:return Object(ce.a)(Object(ce.a)({},e),{},{ingredient:{},order:null,ingridientPopup:!1});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(ce.a)(Object(ce.a)({},e),{},{order:t.order,orderFailed:!1});case q:return Object(ce.a)(Object(ce.a)({},e),{},{orderFailed:!0,order:{number:"\u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"}});case J:return Object(ce.a)(Object(ce.a)({},e),{},{ingredient:{},order:{number:"\u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"},ingridientPopup:!1});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:return Object(ce.a)(Object(ce.a)({},e),{},{error:void 0,wsConnected:!0});case mt:return Object(ce.a)(Object(ce.a)({},e),{},{error:t.payload,wsConnected:!1});case pt:return Object(ce.a)(Object(ce.a)({},e),{},{error:void 0,wsConnected:!1});case jt:return Object(ce.a)(Object(ce.a)({},e),{},{error:void 0,total:t.payload.total,totalToday:t.payload.totalToday,orders:t.payload.orders});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:case Ae:return Object(ce.a)(Object(ce.a)({},e),{},{email:t.email,name:t.name,accessToken:t.accessToken,refreshToken:t.refreshToken});case Le:return Object(ce.a)(Object(ce.a)({},e),{},{email:"",name:"",accessToken:"",refreshToken:""});case Re:case Be:return Object(ce.a)(Object(ce.a)({},e),{},{email:t.email,name:t.name});case Me:return Object(ce.a)(Object(ce.a)({},e),{},{toForgotPassword:!0});case We:return Object(ce.a)(Object(ce.a)({},e),{},{toForgotPassword:!1});default:return e}}}),Gt=n(104),zt={wsInit:dt,wsSendMessage:"WS_SEND_ORDER",onOpen:_t,onClose:pt,onError:mt,onMessage:jt},Jt=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):At.d)(Object(At.a)(Gt.a,function(e){return function(t){var n=null;return function(r){return function(a){var i=t.dispatch,c=(t.getState,a.type),s=a.payload,o=e.wsInit,l=(e.wsSendMessage,e.onOpen),u=e.onClose,d=e.onError,_=e.onMessage;c===o&&(n=new WebSocket(s)),n&&(n.onopen=function(e){i({type:l,payload:e})},n.onerror=function(e){i({type:d,payload:e})},n.onmessage=function(e){var t=e.data;i({type:_,payload:JSON.parse(t)})},n.onclose=function(e){i({type:u,payload:e})}),r(a)}}}}(zt))),Ut=Object(At.e)(Wt,Jt);c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(l.a,{store:Ut,children:Object(b.jsx)(p.a,{children:Object(b.jsx)(Ft,{})})})}),document.getElementById("root")),Dt()},21:function(e,t,n){e.exports={menu:"burgerIngredients_menu__3k2bH",link:"burgerIngredients_link__2Wp8n",menu__item:"burgerIngredients_menu__item__3V3IM",menu__title:"burgerIngredients_menu__title__3Duu8",menu__list:"burgerIngredients_menu__list__1dgpE"}},22:function(e,t,n){e.exports={popup__conteiner:"orderDetails_popup__conteiner__3QuOl",popup__conteiner_err:"orderDetails_popup__conteiner_err__rmBNC",number:"orderDetails_number__O_GkI",order:"orderDetails_order__3jUcC",order_err:"orderDetails_order_err__LJzR9",image:"orderDetails_image__2-XdQ",conteiner:"orderDetails_conteiner__11TKF",text:"orderDetails_text__3kr83",text_type_last:"orderDetails_text_type_last__24u5t"}},25:function(e,t,n){e.exports={section:"profile_section__1HcF7",section_path_order:"profile_section_path_order__2Yw31",menu:"profile_menu__3Cg2P",name:"profile_name__3XBdO",name_active:"profile_name_active__1LWmB",text:"profile_text__3c4i0",orders:"profile_orders__1F330"}},27:function(e,t,n){e.exports={header:"appHeader_header__1Dg9m",navigation:"appHeader_navigation__1tLXS",navigation__conteiner:"appHeader_navigation__conteiner__xc5lk",text:"appHeader_text__3-rVK",text_active:"appHeader_text_active__2Kg2F"}},28:function(e,t,n){e.exports={section:"entryForm_section__36C0u",conteiner:"entryForm_conteiner__2Bnk8",title:"entryForm_title__2lk7s",textBlock:"entryForm_textBlock__1bPTb",text:"entryForm_text__3JJya",link:"entryForm_link__19rA6",inputs:"entryForm_inputs__GAIJw"}},31:function(e,t,n){e.exports={order:"order_order__1Sxy7",order__info:"order_order__info__2EcVI",order__id:"order_order__id__xdlBQ",order__data:"order_order__data__2JctS",order__title:"order_order__title__1shId",order__menu:"order_order__menu__1ddSD",images:"order_images__1ojVg",image:"order_image__3OgSI",total:"order_total__1uad4"}},33:function(e,t,n){e.exports={item:"ingredient_item__3JB9K",item__number:"ingredient_item__number__eTZaM",item__image:"ingredient_item__image__ksjVx",item__price:"ingredient_item__price__1VnQ5",item__text:"ingredient_item__text__1zvuZ"}},45:function(e,t,n){e.exports={burger__menu:"burgerConstructor_burger__menu__2AHev",burger__list:"burgerConstructor_burger__list__eDFfx",burger__item:"burgerConstructor_burger__item__1yYfK",burger__price:"burgerConstructor_burger__price__xXRnP",sum:"burgerConstructor_sum__2mnNt"}},52:function(e,t,n){e.exports={App:"app_App__1YasA",main:"app_main__2RcXV",title:"app_title__2IUrH"}},53:function(e,t,n){e.exports={popup:"modal_popup__1Rwx4",popup__header:"modal_popup__header__3dlr3",title:"modal_title__2t8Zf"}},54:function(e,t,n){e.exports={page:"notFound_page__bAItN",title:"notFound_title__3fIX3",link:"notFound_link__JucdX"}},55:function(e,t,n){e.exports={orders:"orders_orders__3JwZq",link:"orders_link__3H5j-"}},76:function(e,t,n){e.exports={popup__overlay:"modalOverlay_popup__overlay__1DRqU"}},78:function(e,t,n){e.exports={form:"profileForm_form__-ymtq",buttons:"profileForm_buttons__2WeL-"}}},[[195,1,2]]]);
//# sourceMappingURL=main.a23fb97c.chunk.js.map